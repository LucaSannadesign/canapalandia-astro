/* ------------------------------------------------------------
   Theme (Light/Dark) — Canapalandia
   - Default: light
   - If user prefers dark and no explicit choice, follow OS
   - Manual override via <html data-theme="..."> + localStorage
------------------------------------------------------------ */

:root {
  --bg: #ffffff;
  --fg: #0f172a;
  --muted: #475569;
  --card: #f1f5f9;
  --border: rgba(15, 23, 42, 0.14);
  --focus: rgba(34, 197, 94, 0.35);
  color-scheme: light;
}

/* OS preference only when no explicit data-theme is set */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg: #0b1220;
    --fg: #e2e8f0;
    --muted: #94a3b8;
    --card: #0f172a;
    --border: rgba(226, 232, 240, 0.16);
    --focus: rgba(34, 197, 94, 0.35);
    color-scheme: dark;
  }
}

:root[data-theme="light"] {
  --bg: #ffffff;
  --fg: #0f172a;
  --muted: #475569;
  --card: #f1f5f9;
  --border: rgba(15, 23, 42, 0.14);
  --focus: rgba(34, 197, 94, 0.35);
  color-scheme: light;
}

:root[data-theme="dark"] {
  --bg: #0b1220;
  --fg: #e2e8f0;
  --muted: #94a3b8;
  --card: #0f172a;
  --border: rgba(226, 232, 240, 0.16);
  --focus: rgba(34, 197, 94, 0.35);
  color-scheme: dark;
}

html,
body {
  background: var(--bg);
  color: var(--fg);
}

a {
  color: inherit;
}

/* Accessible visually-hidden utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Theme toggle button */
.theme-toggle {
  display: inline-flex;
  align-items: center;
}

.theme-toggle__btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--fg);
  cursor: pointer;
  transition: transform 120ms ease, background-color 200ms ease, border-color 200ms ease;
}

.theme-toggle__btn:hover {
  transform: translateY(-1px);
}

.theme-toggle__btn:active {
  transform: translateY(0);
}

.theme-toggle__btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px var(--focus);
}

.theme-toggle__icon {
  width: 20px;
  height: 20px;
  display: inline-block;
}

/* Requisito: SOLE visibile quando tema è SCURO */
:root[data-theme="dark"] .theme-toggle__icon--sun { display: inline-block; }
:root[data-theme="dark"] .theme-toggle__icon--moon { display: none; }

:root[data-theme="light"] .theme-toggle__icon--sun { display: none; }
:root[data-theme="light"] .theme-toggle__icon--moon { display: inline-block; }

/* Fallback quando data-theme non è ancora settato: treat as light */
:root:not([data-theme]) .theme-toggle__icon--sun { display: none; }
:root:not([data-theme]) .theme-toggle__icon--moon { display: inline-block; }

:root { --bg:#fff; --fg:#0f172a; --card:#f1f5f9; --border:rgba(15,23,42,.14); color-scheme: light; }
:root[data-theme="dark"] { --bg:#0b1220; --fg:#e2e8f0; --card:#0f172a; --border:rgba(226,232,240,.16); color-scheme: dark; }

html, body { background: var(--bg); color: var(--fg); }

.sr-only{
  position:absolute;
  width:1px;height:1px;
  padding:0;margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}

.theme-toggle__btn{
  width:40px;height:40px;border-radius:999px;
  border:1px solid var(--border);
  background:var(--card); color:var(--fg);
  display:inline-flex;align-items:center;justify-content:center;
  cursor:pointer;
}
.theme-toggle__icon{width:20px;height:20px}

:root[data-theme="dark"] .theme-toggle__icon--sun{display:block}
:root[data-theme="dark"] .theme-toggle__icon--moon{display:none}
:root:not([data-theme]), :root[data-theme="light"] .theme-toggle__icon--sun{display:none}
:root:not([data-theme]), :root[data-theme="light"] .theme-toggle__icon--moon{display:block}